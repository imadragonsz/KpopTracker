<!DOCTYPE html>
<html lang="en">
  <head>
    <style>
      .hero-section h1,
      .hero-section p {
        word-break: break-word;
        overflow-wrap: break-word;
        hyphens: auto;
      }
      @media (min-width: 768px) {
        .hero-section p {
          max-width: 600px;
          margin-left: auto;
          margin-right: auto;
        }
      }
    </style>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Group & Member Management</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../style.css" />
  </head>
  <body>
    <!-- Navbar will be loaded dynamically -->
    <div id="navbar-include"></div>
    <script>
      fetch("../components/navbar.html")
        .then((res) => res.text())
        .then((html) => {
          document.getElementById("navbar-include").innerHTML = html;
        });
    </script>
    <!-- HERO SECTION -->
    <section class="py-5 text-center hero-section">
      <div class="container">
        <img
          src="https://cdn-icons-png.flaticon.com/512/727/727245.png"
          alt="Vinyl Icon"
          style="
            width: 90px;
            height: 90px;
            background: #232a36;
            border-radius: 50%;
            padding: 10px;
            border: 2px solid #43c6ac;
          "
          class="mb-3 mt-2 shadow-none"
        />
        <h1 class="fw-bold mb-2" style="color: #43c6ac">
          Group & Member Management
        </h1>
        <p
          class="lead mb-3"
          style="color: #bfc9db; max-width: 600px; margin: auto"
        >
          Track your favorite groups and members, celebrate birthdays and
          milestones, and keep your K-Pop universe organized!
        </p>
      </div>
    </section>
    <div
      class="container my-5 p-4 rounded main-container"
      style="max-width: 700px; background: #232946; width: 100%"
    >
      <!-- Filter/Search Bar -->
      <div class="row g-3 mb-3 align-items-end">
        <div class="col-12 col-md-6">
          <input
            type="text"
            id="searchGroupInput"
            class="form-control"
            placeholder="Search by group name..."
          />
        </div>
        <div class="col-12 col-md-4">
          <select id="groupSortSelect" class="form-select w-100">
            <option value="az">Sort: Group A-Z</option>
            <option value="za">Sort: Group Z-A</option>
          </select>
        </div>
        <div class="col-6 col-md-3">
          <span id="groupCount" class="fw-bold text-info"></span>
        </div>
      </div>
      <!-- Group List Card -->
      <div class="row g-3 mb-4">
        <div class="col-12">
          <div class="card border-info bg-dark">
            <div class="card-body">
              <form id="addGroupForm" class="row g-2 align-items-end">
                <div class="col-12 col-md-8">
                  <input
                    type="text"
                    id="groupName"
                    class="form-control"
                    placeholder="Group Name (e.g. BTS)"
                    required
                  />
                </div>
                <div class="col-12 col-md-4">
                  <input
                    type="url"
                    id="groupImage"
                    class="form-control"
                    placeholder="Group Image URL (optional)"
                  />
                </div>
                <div class="col-12">
                  <textarea
                    id="groupNotes"
                    class="form-control"
                    rows="2"
                    placeholder="Notes, fun facts, or your own group ranking..."
                  ></textarea>
                </div>
                <div class="col-12 d-grid mt-2">
                  <button type="submit" class="btn btn-info fw-bold">
                    Add Group
                  </button>
                </div>
              </form>
              <ul id="groupList" class="list-group mb-3"></ul>
            </div>
          </div>
        </div>
      </div>
      <!-- Gallery View (for members, etc.) -->
      <div
        id="galleryView"
        class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"
      ></div>
    </div>
    <footer
      class="text-center py-4 mt-5"
      style="
        color: #67e8f9;
        background: rgba(34, 41, 70, 0.98);
        border-radius: 0 0 18px 18px;
      "
    >
      <div class="container">
        <small
          >K-Pop Album Tracker &copy; 2025. Made with
          <span style="color: #ff6f61">â™¥</span> for the K-Pop community. |
          <a href="#" style="color: #43c6ac">Privacy Policy</a> |
          <a href="#" style="color: #43c6ac">Terms</a></small
        >
      </div>
    </footer>
    <!-- Edit Group Modal -->
    <div
      class="modal fade"
      id="editGroupModal"
      tabindex="-1"
      aria-labelledby="editGroupModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content bg-dark text-light">
          <div class="modal-header">
            <h5 class="modal-title" id="editGroupModalLabel">Edit Group</h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="editGroupForm">
              <div class="mb-3">
                <label for="editGroupName" class="form-label">Group Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="editGroupName"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="editGroupImage" class="form-label"
                  >Group Image URL</label
                >
                <input type="url" class="form-control" id="editGroupImage" />
              </div>
              <div class="mb-3">
                <label for="editGroupNotes" class="form-label"
                  >Notes/Comments</label
                >
                <textarea
                  class="form-control"
                  id="editGroupNotes"
                  rows="2"
                  placeholder="Notes/Comments for this group..."
                ></textarea>
              </div>
              <button type="submit" class="btn btn-info fw-bold">
                Save Changes
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
    <!-- Group Info Modal -->
    <div
      class="modal fade"
      id="groupInfoModal"
      tabindex="-1"
      aria-labelledby="groupInfoModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content bg-dark text-light">
          <div class="modal-header">
            <h5 class="modal-title" id="groupInfoModalLabel">Group Info</h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body" id="groupInfoBody">
            <!-- Info will be injected by JS -->
          </div>
        </div>
      </div>
    </div>
    <!-- Member Management Modal -->
    <div
      class="modal fade"
      id="manageMembersModal"
      tabindex="-1"
      aria-labelledby="manageMembersModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content bg-dark text-light">
          <div class="modal-header">
            <h5 class="modal-title" id="manageMembersModalLabel">
              Manage Members
            </h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="addMemberForm" class="mb-3">
              <input
                type="text"
                class="form-control mb-2"
                id="memberName"
                placeholder="Member Name"
                required
              />
              <input
                type="date"
                class="form-control mb-2"
                id="memberBirthday"
                placeholder="Birthday (optional)"
              />
              <input
                type="number"
                class="form-control mb-2"
                id="memberHeight"
                placeholder="Height (cm, optional)"
                min="0"
              />
              <input
                type="text"
                class="form-control mb-2"
                id="memberInfo"
                placeholder="Info (optional)"
              />
              <input
                type="url"
                class="form-control mb-2"
                id="memberImage"
                placeholder="Image URL (optional)"
              />
              <button type="submit" class="btn btn-info">Add Member</button>
            </form>
            <ul id="membersList" class="list-group"></ul>
          </div>
        </div>
      </div>
    </div>
    <!-- Member Info Modal -->
    <div
      class="modal fade"
      id="memberInfoModal"
      tabindex="-1"
      aria-labelledby="memberInfoModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content bg-dark text-light">
          <div class="modal-header">
            <h5 class="modal-title" id="memberInfoModalLabel">Member Info</h5>
            <button
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body" id="memberInfoBody">
            <!-- Member info will be injected by JS -->
          </div>
        </div>
      </div>
    </div>
    <!-- Album Info Modal -->
    <div
      class="modal fade"
      id="albumInfoModal"
      tabindex="-1"
      aria-labelledby="albumInfoModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content bg-dark text-light">
          <div class="modal-header">
            <h5 class="modal-title" id="albumInfoModalLabel">Album Info</h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body" id="albumInfoBody">
            <!-- Album info will be injected by JS -->
          </div>
        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.7/dist/umd/supabase.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module" src="../js/authUI.js"></script>
    <script type="module" src="../js/api/supabaseClient.js" defer></script>
    <script type="module" src="../js/api/groupApi.js" defer></script>
    <script type="module" src="../js/pages/groupsPage.js" defer></script>
  </body>
</html>
